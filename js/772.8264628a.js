"use strict";(self["webpackChunkshare_doc"]=self["webpackChunkshare_doc"]||[]).push([[772],{2772:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var i=function(){var e=this,t=e._self._c;return"edit"==e.editMode?t("div",{staticClass:"v-text",on:{keydown:e.handleKeydown,keyup:e.handleKeyup}},[t("div",{ref:"text",class:{"can-edit":e.canEdit},style:{verticalAlign:e.element.style.verticalAlign},attrs:{contenteditable:e.canEdit,tabindex:"0"},domProps:{innerHTML:e._s(e.element.propValue)},on:{dblclick:e.setEdit,paste:e.clearStyle,mousedown:e.handleMousedown,blur:e.handleBlur,input:e.handleInput}})]):t("div",{staticClass:"v-text preview"},[t("div",{style:{verticalAlign:e.element.style.verticalAlign},domProps:{innerHTML:e._s(e.element.propValue)}})])},r=[],s=n(629),a=n(1643),l=n(5299),o=n(6864),c={extends:o.Z,props:{propValue:{type:String,required:!0,default:""},request:{type:Object,default:()=>{}},element:{type:Object,default:()=>{}},linkage:{type:Object,default:()=>{}}},data(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1,cancelRequest:null}},computed:{...(0,s.rn)(["editMode"])},created(){this.request&&(this.cancelRequest=(0,l.ZP)(this.request,this.element,"propValue","string"))},beforeDestroy(){this.request&&this.cancelRequest()},methods:{handleInput(e){this.$emit("input",this.element,e.target.innerHTML)},handleKeydown(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&a.k.includes(e.keyCode)||46==e.keyCode)&&e.stopPropagation()},handleKeyup(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown(e){this.canEdit&&e.stopPropagation()},clearStyle(e){e.preventDefault();const t=e.clipboardData,n=t.getData("text/plain")||"";""!==n&&document.execCommand("insertText",!1,n),this.$emit("input",this.element,e.target.innerHTML)},handleBlur(e){this.element.propValue=e.target.innerHTML||"&nbsp;";const t=e.target.innerHTML;""!==t?this.element.propValue=e.target.innerHTML:(this.element.propValue="",this.$nextTick((()=>{this.element.propValue="&nbsp;"}))),this.canEdit=!1},setEdit(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}},u=c,d=n(1001),h=(0,d.Z)(u,i,r,!1,null,"458f462c",null),p=h.exports},6864:function(e,t,n){n.d(t,{Z:function(){return u}});var i,r,s=n(3739),a={props:{linkage:{type:Object,default:()=>{}},element:{type:Object,default:()=>{}}},created(){this.linkage?.data?.length&&(s.Z.$on("v-click",this.onClick),s.Z.$on("v-hover",this.onHover))},mounted(){const{data:e,duration:t}=this.linkage||{};e?.length&&(this.$el.style.transition=`all ${t}s`)},beforeDestroy(){this.linkage?.data?.length&&(s.Z.$off("v-click",this.onClick),s.Z.$off("v-hover",this.onHover))},methods:{changeStyle(e=[]){e.forEach((e=>{e.style.forEach((e=>{e.key&&(this.element.style[e.key]=e.value)}))}))},onClick(e){const t=this.linkage.data.filter((t=>t.id===e&&"v-click"===t.event));this.changeStyle(t)},onHover(e){const t=this.linkage.data.filter((t=>t.id===e&&"v-hover"===t.event));this.changeStyle(t)}}},l=a,o=n(1001),c=(0,o.Z)(l,i,r,!1,null,null,null),u=c.exports},5299:function(e,t,n){n.d(t,{Ax:function(){return o},ZP:function(){return c},_q:function(){return r}});var i=n(4720);const r=/(https?):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/;function s(e){return new Promise(((t,n)=>{const i=new XMLHttpRequest;i.timeout=6e3;let r=o(e.url);"GET"===e.method&&(r+=`${a(e.data)}`),i.open(e.method,r),i.ontimeout=n,i.onerror=n,i.onload=e=>{t(e.target.response)},i.send(JSON.stringify(l(e.data,e.paramType)))}))}function a(e){let t="";return e.forEach((e=>{e[0]&&(t+=`&${e[0]}=${e[1]}`)})),t?"?"+t:""}function l(e,t){if(!e)return"";if("array"===t)return e;const n={};return e.forEach((e=>{e[0]&&(n[e[0]]=e[1])})),n}function o(e){return e.startsWith("http")?e:"https://"+e}function c(e,t,n,a="object"){let l,c=0;const u=e?.url;return(u&&!/^\d+$/.test(u)||r.test(o(u)))&&(e.series?l=setInterval((()=>{0!=e.requestCount&&e.requestCount<=c?clearInterval(l):(c++,s(e,a).then((e=>{t[n]="object"===a||"array"===a?JSON.parse(e):e})).catch((e=>i.Message.error(e?.message||e))))}),e.time):s(e,a).then((e=>{t[n]="object"===a||"array"===a?JSON.parse(e):e})).catch((e=>i.Message.error(e?.message||e)))),function(){clearInterval(l)}}}}]);
//# sourceMappingURL=772.8264628a.js.map
(function(){"use strict";var e={7062:function(e,t,a){var s=a(144),i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{overflow:"hidden"},attrs:{id:"app"}},[t("keep-alive",[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view")],1)],1)],1)},n=[],o=a(1001),r={},l=(0,o.Z)(r,i,n,!1,null,null,null),c=l.exports,m=a(8345),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("el-container",[t("el-aside",{attrs:{width:"160px"}},[t("HomeAside")],1),t("el-container",[t("el-header",{staticClass:"header"},[t("HomeHeader")],1),t("el-main",[t("keep-alive",[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view")],1)],1)],1)],1)],1)],1)},d=[],p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"homeAsideMain"},[e._m(0),t("div",{staticClass:"menuList"},e._l(e.menu,(function(a,s){return t("div",{staticClass:"menu",class:s===e.active?"active":"",on:{click:function(t){return e.activeMenu(s)}}},[e._v(e._s(a))])})),0)])},f=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex"}},[t("h1",{staticClass:"title"},[e._v("墨书")]),t("div",{staticClass:"logoPicture"})])}],h={name:"HomeAside",data(){return{menu:["首页","团队管理","文档管理","设计原型"],routerName:["homeMain","manageTeam","manageDocument","manageDesignPrototype","teamDetails"],active:0}},methods:{activeMenu(e){"manageDesignPrototype"!==this.routerName[e]?(this.active=e,4===this.active&&(this.active=1),console.log(this.active),this.$router.push({name:this.routerName[e]})):window.location.href="http://draw.io/"}},watch:{$route:{immediate:!0,handler(e,t){this.active=this.routerName.indexOf(e.name),4===this.active&&(this.active=1)}}}},g=h,v=(0,o.Z)(g,p,f,!1,null,"3af4d9b4",null),b=v.exports,y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("div",{staticClass:"HomeHeaderMain"},[e._m(0),t("div",{staticClass:"avatar"}),t("div",{staticClass:"username"},[e._v("欢迎，"+e._s(e.$store.state.user.username))]),t("div",{staticClass:"iconfont icon-ico_dengchu logout",on:{click:e.logout}})])])},_=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"invite"},[t("span",[e._v("查看邀请")]),t("span",{staticClass:"iconfont icon-yaoqing"})])}],C=a(629);s["default"].use(C.ZP);var w=new C.ZP.Store({state:{isLogin:"true"===localStorage.isLogin,user:{username:""!==localStorage.getItem("username")?localStorage.getItem("username"):"",cookie:""}},getters:{},mutations:{setLogin(e,t){localStorage.setItem("username",t.username),e.isLogin=t.isLogin,e.user.username=t.username}},actions:{},modules:{}}),x=a(9669),k=a.n(x);const S=k().create({baseURL:"http://127.0.0.1:8000/"});S.interceptors.request.use((function(e){return w.state.user&&w.state.user.token&&(e.headers.Authorization="Bearer "+w.state.user.token),e}),(function(e){return Promise.reject(e)})),S.interceptors.response.use((function(e){return 200===e.status?e.data:e}),(function(e){return Promise.reject(e)}));var D=S;a(7577);let I=e=>D({url:"/profile/add/",data:e,method:"POST"}),T=e=>D({url:"/profile/notices/",params:e,method:"GET"});var $={name:"HomeHeader",data(){return{username:"熊本熊"}},async mounted(){},methods:{logout(){this.$confirm("确定退出账号吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((()=>{w.commit("setLogin",!1),localStorage.isLogin=!1,this.$message({type:"success",message:"已登出账号"}),this.$router.push({path:"/login"})})).catch((()=>{}))}}},j=$,P=(0,o.Z)(j,y,_,!1,null,"4c7ee76c",null),M=P.exports,L={name:"HomeView",components:{HomeAside:b,HomeHeader:M},async mounted(){let e=await T({username:w.state.user.username});console.log(e)}},O=L,E=(0,o.Z)(O,u,d,!1,null,"461ff3bb",null),N=E.exports,Z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"HomeMain"},[t("div",{staticClass:"breadCrumb"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{staticStyle:{"font-weight":"800 !important"}},[e._v("首页")])],1)],1)])},B=[],A={name:"HomeMain",data(){return{}},component:{}},F=A,H=(0,o.Z)(F,Z,B,!1,null,"70e9f51c",null),q=H.exports,J=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("div",{staticClass:"breadCrumb"},[t("el-breadcrumb",{attrs:{separator:"/",to:{path:"/manageDocument"}}},[t("el-breadcrumb-item",[e._v("团队管理")])],1)],1),t("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start"}},[t("el-button",{staticClass:"buttonAddTeam",attrs:{type:"primary",icon:"el-icon-s-custom"},on:{click:e.addTeam}},[e._v("添加团队")]),t("el-input",{attrs:{placeholder:"添加好友"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addFriend.apply(null,arguments)}},model:{value:e.addFriendName,callback:function(t){e.addFriendName=t},expression:"addFriendName"}}),t("el-button",{staticClass:"buttonAddTeam",attrs:{type:"primary",icon:"el-icon-user"},on:{click:e.addFriend}},[e._v("添加好友")]),e.addingTeam?t("add-team-modal",{on:{closeModal:e.closeModal}}):e._e()],1),t("h3",{staticStyle:{margin:"20px 0 0 15px"}},[e._v("已有团队")]),t("div",{staticClass:"cardContainer"},e._l(e.teamList,(function(a,s){return t("el-card",{staticClass:"box-card",nativeOn:{click:function(t){return e.goTeamDetails(s)}}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[e._v(e._s(a.fields.name))])]),t("div",{staticClass:"cardContent"},[t("span",[e._v("团队描述: "+e._s(a.fields.description))]),t("div",{staticClass:"teamMemberAmount"},[t("span",[e._v("团队人数: "+e._s(a.fields.member.length))]),t("span",{staticClass:"iconfont icon-tuandui"})])])])})),1)])},W=[],G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("div",{staticClass:"addTeamContent"},[t("div",{staticClass:"topTitle"},[t("span",[e._v("添加团队")]),t("span",{staticClass:"iconfont icon-guanbi close",on:{click:e.closeModal}})]),t("div",{staticClass:"formContainer"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.team,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"团队名称",prop:"name"}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.team.name,callback:function(t){e.$set(e.team,"name",t)},expression:"team.name"}})],1),t("el-form-item",{attrs:{label:"团队描述",prop:"teamDescription"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:e.team.description,callback:function(t){e.$set(e.team,"description",t)},expression:"team.description"}})],1),t("el-form-item",{attrs:{label:"团队类型"}},[t("el-select",{attrs:{placeholder:"请选择团队类型"},model:{value:e.team.region,callback:function(t){e.$set(e.team,"region",t)},expression:"team.region"}},[t("el-option",{attrs:{label:"开发",value:"develop"}}),t("el-option",{attrs:{label:"科研",value:"research"}}),t("el-option",{attrs:{label:"市场",value:"marketing"}})],1)],1),t("el-form-item",{attrs:{label:"添加团队队员"}},[t("el-select",{attrs:{placeholder:"请选择添加团员"},model:{value:e.team.member,callback:function(t){e.$set(e.team,"member",t)},expression:"team.member"}},e._l(e.friend,(function(e,a){return t("el-option",{attrs:{label:e.fields.username,value:e.fields.username}})})),1)],1)],1)],1),t("div",{staticClass:"teamMemberContainer"},e._l(e.team.memberList,(function(a,s){return t("div",{staticClass:"member"},[t("span",{staticClass:"memberName"},[e._v(e._s(a))]),t("span",{staticClass:"icon-ren-danren iconfont logo"})])})),0),t("el-button",{staticStyle:{width:"100px","align-self":"center"},attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("创建")])],1)])},z=[];let R=e=>D({url:"/team/manage/",params:e,method:"GET"}),U=e=>D({url:"/team/list/",method:"GET",params:e}),V=(e,t)=>D({url:"/team/detail/"+e,method:"GET",params:t}),X=e=>D({url:"/team/create/",data:e,method:"POST"}),Y=e=>D({url:"/project/create/",method:"POST",data:e}),K=e=>D({url:"/project/manage/",method:"GET",params:e}),Q=e=>D({url:"/team/del/",method:"POST",data:e});var ee={name:"Modal",data(){return{team:{name:"",description:"暂无描述",member:"",memberList:[],JSONMemberList:[],region:""},friend:[],rules:{name:[{required:!0,message:"请输入团队名称",trigger:"blur"}],description:[{required:!0,message:"请填写团队描述",trigger:"change"}]}}},async mounted(){this.friend=await R({username:w.state.user.username}),console.log(this.friend)},methods:{async submitForm(e){let t=await X({username:w.state.user.username,team_name:this.team.name,description:this.team.description,region:2,members:this.team.JSONMemberList});"success"===t.msg&&(this.$message({message:"创建团队成功!",type:"success"}),this.$emit("closeModal"))},closeModal(e){11!==e?this.$confirm("确定放弃创建团队吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$emit("closeModal")})):this.$emit("closeModal")}},watch:{"team.member":{handler(e,t){console.log("kskksks"),this.team.memberList.push(e),this.team.JSONMemberList.push({member:e})},deep:!0}}},te=ee,ae=(0,o.Z)(te,G,z,!1,null,"366a3c5a",null),se=ae.exports,ie={name:"ManageTeam",components:{AddTeamModal:se},async mounted(){let e=await U({username:w.state.user.username});e.msg&&"no teams you joined"===e.msg||(this.teamList=e)},data(){return{addingTeam:!1,teamName:"",showCard:!1,addFriendName:"",teamList:[]}},methods:{addTeam(){this.addingTeam=!0},closeModal(){this.addingTeam=!1,this.$router.go(1)},async addFriend(){let e=await I({username:w.state.user.username,friend_username:this.addFriendName});"success"===e.msg&&this.$message({message:`添加好友${this.addFriendName}成功`,type:"success"})},goTeamDetails(e){this.$router.push({name:"teamDetails",params:{teamId:this.teamList[e].pk}})}}},ne=ie,oe=(0,o.Z)(ne,J,W,!1,null,"316bba95",null),re=oe.exports,le=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("div",{staticClass:"breadCrumb"},[t("el-breadcrumb",{attrs:{separator:"/",to:{path:"/manageDocument"}}},[t("el-breadcrumb-item",[e._v("文档管理")])],1)],1),t("div",{staticClass:"topPart"},[t("div",{staticClass:"input"},[t("el-input",{attrs:{placeholder:"请输入想查找的文档名字","suffix-icon":"el-icon-search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[e._v("搜索")]),t("el-button",{attrs:{type:"success"},on:{click:e.goCreateDocument}},[e._v("添加文档")])],1),t("div",{staticClass:"tablePart"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"filename",label:"文件名",width:"500"}}),t("el-table-column",{attrs:{prop:"creator",label:"创建者",width:"300"}}),t("el-table-column",{attrs:{prop:"lastModified",label:"最后一次修改",width:"200"}}),t("el-table-column",{attrs:{prop:"team",width:"200",label:"隶属于的团队"}}),t("el-table-column",{attrs:{"header-cell-style":{"text-align":"center"},width:"110",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deleteDocument(a.$index)}}}),t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){return e.goEditDocument(a.$index)}}})]}}])})],1)],1)])},ce=[],me={name:"ManageOnlineDocument",data(){return{search:"",tableData:JSON.parse(localStorage.getItem("fileInfo"))||[]}},methods:{deleteDocument(e){this.tableData.splice(e,1),console.log(this.tableData),localStorage.setItem("fileInfo",JSON.stringify(this.tableData)),console.log(e)},goCreateDocument(){this.$router.push({path:"/documentEdit"})},goEditDocument(e){this.$router.push({path:"/documentEdit",query:{fileInfo:this.tableData[e],index:e}})}}},ue=me,de=(0,o.Z)(ue,le,ce,!1,null,"77b56f8c",null),pe=de.exports,fe=function(){var e=this;e._self._c;return e._m(0)},he=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("h1",[e._v("我是设计原型")])])}],ge={name:"ManageDesignPrototype"},ve=ge,be=(0,o.Z)(ve,fe,he,!1,null,"1b7f407c",null),ye=be.exports,_e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("div",{staticClass:"container",staticStyle:{overflow:"hidden"}},[t("h1",{staticClass:"webName"},[e._v("墨书")]),t("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isLogin?t("div",{key:"login"},[t("div",{staticClass:"login-form",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}}},[t("h2",{staticClass:"title"},[e._v("登录")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],staticStyle:{"margin-top":"20px"},attrs:{type:"text",name:"username",placeholder:"用户名"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",name:"password",placeholder:"密码"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),t("span",{staticClass:"change",on:{click:function(t){e.isLogin=!1}}},[e._v("尚未有账号?点击注册")]),t("button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"submit"},on:{click:e.login}},[e._v("登录")]),t("span",{staticClass:"change",on:{click:function(t){e.isLogin=!1}}},[e._v("尚未有账号?点击注册")])])]):t("div",{key:"register"},[t("div",{staticClass:"login-form"},[t("h2",{staticClass:"title"},[e._v("注册")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.username,expression:"registerInfo.username"}],staticStyle:{"margin-top":"20px"},attrs:{type:"text",name:"username",placeholder:"用户名"},domProps:{value:e.registerInfo.username},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"username",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password1,expression:"registerInfo.password1"}],attrs:{type:"password",name:"password",placeholder:"密码"},domProps:{value:e.registerInfo.password1},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"password1",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password2,expression:"registerInfo.password2"}],attrs:{type:"password",name:"password",placeholder:"确认密码"},domProps:{value:e.registerInfo.password2},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"password2",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.email,expression:"registerInfo.email"}],attrs:{type:"text",name:"pemail",placeholder:"邮箱"},domProps:{value:e.registerInfo.email},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"email",t.target.value)}}}),t("button",{attrs:{type:"submit"},on:{click:e.register}},[e._v("注册")]),t("span",{staticClass:"change",on:{click:function(t){e.isLogin=!0}}},[e._v("返回登录")])])])])],1)])},Ce=[];let we=e=>D({url:"/profile/signup/",method:"POST",data:e}),xe=e=>D({url:"/profile/login/",method:"POST",data:e});var ke={name:"LoginPage",data(){return{isLogin:!0,user:{username:"",password:""},registerInfo:{username:"",password1:"",password2:"",email:""}}},methods:{async login(){let e=await xe({username:this.user.username,password:this.user.password});console.log(e),"success"===e.msg&&(w.commit("setLogin",{isLogin:!0,username:this.user.username}),localStorage.isLogin=!0,await this.$router.push({path:"/home"}))},async register(){let e=await we({username:this.registerInfo.username,password1:this.registerInfo.password1,password2:this.registerInfo.password2,email:this.registerInfo.email});"success"===e.msg&&(w.commit("setLogin",{isLogin:!0,username:this.registerInfo.username}),localStorage.isLogin=!0,await this.$router.push({path:"/home"}),this.$message({showClose:!0,message:"注册成功!",type:"success"}))}}},Se=ke,De=(0,o.Z)(Se,_e,Ce,!1,null,"54b4f1cc",null),Ie=De.exports,Te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("div",{staticClass:"OperationWrap"},[t("div",{staticClass:"buttonWrap"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-back"},on:{click:e.returnBack}},[e._v("返回")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-paperclip"},on:{click:e.save}},[e._v("保存")])],1)]),t("div",{staticClass:"titleWrap",staticStyle:{width:"95vw",margin:"5px auto 15px"}},[e.isEditingTitle?t("div",{staticClass:"blockWrap",on:{click:e.cancelEditTitle}}):e._e(),e.isEditingTitle?e._e():t("h2",[e._v(e._s(e.fileInfo.filename))]),e.isEditingTitle?t("input",{directives:[{name:"model",rawName:"v-model",value:e.fileInfo.filename,expression:"fileInfo.filename"}],ref:"inputTitle",attrs:{type:"text"},domProps:{value:e.fileInfo.filename},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.cancelEditTitle.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.fileInfo,"filename",t.target.value)}}}):e._e(),t("span",{staticClass:"iconfont icon-bianji",staticStyle:{color:"skyblue"},on:{click:e.editTitle}})]),t("DocumentEditorWang",{ref:"editorChild",staticClass:"editor",staticStyle:{width:"95vw",margin:"0 auto"},attrs:{docContent:e.fileInfo.fileContent},on:{getEditorContent:e.addDocument}})],1)},$e=[],je=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticStyle:{border:"1px solid #ccc"}},[t("Toolbar",{staticStyle:{"border-bottom":"1px solid #ccc"},attrs:{editor:e.editor,defaultConfig:e.toolbarConfig,mode:e.mode}}),t("Editor",{staticStyle:{height:"500px","overflow-y":"hidden",width:"95vw"},attrs:{defaultConfig:e.editorConfig,mode:e.mode},on:{onCreated:e.onCreated},model:{value:e.html,callback:function(t){e.html=t},expression:"html"}})],1)},Pe=[],Me=a(5660),Le=s["default"].extend({props:["docContent"],components:{Editor:Me.M,Toolbar:Me.o},data(){return{editor:null,html:"<p>随便写点东西吧~</p>",toolbarConfig:{},editorConfig:{placeholder:"请输入内容..."},mode:"default"}},methods:{onCreated(e){this.editor=Object.seal(e)},showMe(){this.$emit("getEditorContent",this.html)}},created(){this.$nextTick((()=>{""!==this.docContent&&(this.html=this.docContent)}))},beforeDestroy(){const e=this.editor;null!=e&&e.destroy()}}),Oe=Le,Ee=(0,o.Z)(Oe,je,Pe,!1,null,null,null),Ne=Ee.exports;function Ze(){let e=(new Date).getTime();return e.toString()}var Be={name:"DocumentEditor",components:{DocumentEditorWang:Ne},data(){return{isSaved:!1,fileInfo:{filename:"暂无标题",fileContent:"",lastChanged:""},isEditingTitle:!1,isEditingDocument:!1}},beforeRouteEnter(e,t,a){e.query&&e.query.fileInfo?(console.log(e.query.fileInfo),a((t=>{t.fileInfo=e.query.fileInfo,t.isEditingDocument=!0,console.log(t.fileInfo)}))):a()},methods:{returnBack(){this.isSaved?this.$router.go(-1):this.$confirm("该文件尚未保存，是否确认退出?","提示",{confirmButtonText:"确定退出",cancelButtonText:"取消退出",type:"warning"}).then((()=>{this.$message({type:"success",message:"成功退出"}),this.$router.go(-1)}))},editTitle(){this.isEditingTitle=!0,this.$nextTick((()=>{this.$refs.inputTitle.focus()}))},cancelEditTitle(){this.isEditingTitle=!1},save(){this.$refs.editorChild.showMe(),this.isSaved=!0,this.$message({message:"成功保存",type:"success"})},addDocument(e){let t=JSON.parse(localStorage.getItem("fileInfo"))||[];if(this.isEditingDocument)this.fileInfo.fileContent=e,console.log(this.fileInfo),t[parseInt(this.$route.query.index)]=this.fileInfo;else{let a=(new Date).getFullYear(),s=(new Date).getMonth()+1,i=(new Date).getDate(),n={filename:this.fileInfo.filename,fileContent:e,lastModified:`${a}-${s}-${i}`,creator:w.state.user.username,fileId:Ze()};t.push(n)}console.log(t),localStorage.setItem("fileInfo",JSON.stringify(t))}}},Ae=Be,Fe=(0,o.Z)(Ae,Te,$e,!1,null,"7b9a235d",null),He=Fe.exports,qe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("el-breadcrumb",{attrs:{separator:"/",to:{path:"/manageDocument"}}},[t("el-breadcrumb-item",[e._v("团队管理")]),t("el-breadcrumb-item",[e._v("团队项目管理")])],1),t("div",{staticClass:"categories"},[e._l(e.categories,(function(a,s){return t("span",{key:s,class:s===e.active?"active":"",on:{click:function(t){return e.moveBar(s)}}},[e._v(e._s(a))])})),t("div",{staticClass:"moveBar",style:`transform: translateX(${e.move}px)`})],2),0===this.active&&e.teamDetails?t("div",{staticClass:"teamDetailsContainer",staticStyle:{margin:"15px 0 0 15px"}},[t("h2",{staticClass:"teamName"},[e._v(e._s(e.teamDetails.detail[0].fields.name))]),t("span",{staticClass:"teamDescription"},[e._v("团队简介："+e._s(e.teamDetails.detail[0].fields.description))]),t("span",{staticClass:"memberAmount",staticStyle:{"margin-top":"20px"},on:{click:function(t){return e.moveBar(2)}}},[e._v("团队人数："+e._s(e.memberList.length)+" "),t("span",{staticClass:"iconfont icon-tuandui",staticStyle:{"margin-left":"7px"}})])]):e._e(),1===this.active?t("div",{staticClass:"projectDetailContainer",staticStyle:{margin:"15px 0 0 15px"}},[t("div",{staticClass:"teamProject"},[t("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center"}},[t("h3",[e._v("项目 ")]),t("span",{staticClass:"iconfont icon-jurassic_add-project"}),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"info",icon:"el-icon-folder-add",circle:""},on:{click:e.addProject}})],1),0===e.teamProjects.length?t("div",{staticStyle:{margin:"20px 0 0 0"}},[e._v("尚未有项目，试试创建一个吧")]):t("div",{staticClass:"projectCategoryContainer"},e._l(e.teamProjects,(function(a,s){return t("el-card",{staticClass:"box-card",nativeOn:{click:function(t){return e.goProjectDetails(s)}}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v(e._s(a.fields.name))])]),t("div",{staticClass:"text item"},[e._v(" "+e._s(a.fields.description)+" ")]),t("el-button",{staticClass:"deleteProject",staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"danger",icon:"el-icon-delete",circle:""}})],1)})),1),e.showAddProjectModal?t("AddProjectModal",{on:{closeModal:e.closeModal}}):e._e()],1)]):e._e(),2===this.active?t("div",{staticClass:"memberContainer",staticStyle:{margin:"15px 0 0 15px"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.memberList}},[t("el-table-column",{attrs:{label:"用户名",width:"350"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("i",{staticClass:"el-icon-s-custom"}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row.fields.username))])]}}],null,!1,1683006748)}),t("el-table-column",{attrs:{label:"邮箱",width:"350"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("el-tag",{attrs:{size:"medium"}},[e._v(e._s(a.row.fields.email))])],1)]}}],null,!1,1505919145)}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("删除 ")])]}}],null,!1,1536773922)})],1)],1):e._e()],1)},Je=[],We=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("div",{staticClass:"addTeamContent"},[t("div",{staticClass:"topTitle"},[t("span",[e._v("添加项目")]),t("span",{staticClass:"iconfont icon-guanbi close",on:{click:e.closeModal}})]),t("div",{staticClass:"formContainer"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.project,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.project.name,callback:function(t){e.$set(e.project,"name",t)},expression:"project.name"}})],1),t("el-form-item",{attrs:{label:"项目描述",prop:"teamDescription"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:e.project.description,callback:function(t){e.$set(e.project,"description",t)},expression:"project.description"}})],1)],1)],1),t("el-button",{staticStyle:{width:"100px","align-self":"center"},attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("创建")])],1)])},Ge=[],ze={name:"AddProjectModal",data(){return{project:{name:"",description:"暂无描述"},friend:[],rules:{name:[{required:!0,message:"请输入团队名称",trigger:"blur"}],description:[{required:!0,message:"请填写团队描述",trigger:"change"}]}}},methods:{async submitForm(e){let t=await Y({username:w.state.user.username,project_name:this.project.name,description:this.project.description,team_pk:this.$route.params.teamId});console.log(t),this.$emit("closeModal")},closeModal(e){11!==e?this.$confirm("确定放弃创建团队吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$emit("closeModal")})):this.$emit("closeModal")}},watch:{"team.member":{handler(e,t){console.log("kskksks"),this.team.memberList.push(e),this.team.JSONMemberList.push({member:e})},deep:!0}}},Re=ze,Ue=(0,o.Z)(Re,We,Ge,!1,null,"404c5060",null),Ve=Ue.exports,Xe={name:"TeamDetails",components:{AddProjectModal:Ve},async mounted(){let e=await V(this.$route.params.teamId,{});this.teamDetails=e,this.teamProjects=e.projects,this.memberList=e.members,console.log(this.memberList),e=await K({team_pk:this.$route.params.teamId,username:w.state.user.username}),console.log(this.teamProjects)},methods:{addProject(){this.showAddProjectModal=!0},closeModal(){this.showAddProjectModal=!1},moveBar(e){this.active=e,this.move=111.2*e},async handleDelete(e,t){console.log(e,t);let a=await Q({team_pk:parseInt(this.$route.params.teamId),oper:w.state.user.username,target:t.fields.username});console.log(a)},goProjectDetails(e){console.log(this.teamProjects[e]),this.$router.push({name:"projectDetails",params:{projectId:this.teamProjects[e].pk}})}},data(){return{teamDetails:null,teamProjects:[],showAddProjectModal:!1,categories:["关于团队","项目","团队成员"],memberList:[],move:0,active:0}}},Ye=Xe,Ke=(0,o.Z)(Ye,qe,Je,!1,null,"42144c06",null),Qe=Ke.exports,et=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("div",{staticClass:"cover"}),t("div",{staticClass:"topBanner"},[e._l(e.topBanner,(function(a,s){return t("span",{staticClass:"topBannerContent"},[e._v(e._s(a))])})),t("button",{staticClass:"loginButton",on:{click:e.goLogin}},[e._v("登录")])],2),t("h1",{staticClass:"title"},[e._v(e._s(e.title))]),t("button",{staticClass:"journeyButton",on:{click:e.goLogin}},[e._v("立刻开始你的旅程!")])])},tt=[],at={name:"HomePage",data(){return{topBanner:["产品","联系我们","关于我们"],title:"为",titleArray:["什","么","要","独","自","一","人","创","作？","建","立","属","于","你","的","团","队"],mark:0}},mounted(){let e=setInterval((()=>{this.title=this.title+this.titleArray[this.mark++],this.mark===this.titleArray.length&&clearInterval(e)}),100)},methods:{goLogin(){this.$router.push({path:"/login"})}}},st=at,it=(0,o.Z)(st,et,tt,!1,null,"4551ba4e",null),nt=it.exports,ot=function(){var e=this;e._self._c;return e._m(0)},rt=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("h1",[e._v("我是project details")])])}],lt={name:"ProjectDetails"},ct=lt,mt=(0,o.Z)(ct,ot,rt,!1,null,"4ff95106",null),ut=mt.exports;s["default"].use(m.Z);const dt=[{path:"/",redirect:"/homePage"},{path:"/home",name:"home",component:N,redirect:{name:"homeMain"},children:[{path:"/main",name:"homeMain",component:q},{path:"/manageTeam",name:"manageTeam",component:re},{path:"/manageDocument",name:"manageDocument",component:pe},{path:"/manageDesignPrototype",name:"manageDesignPrototype",component:ye},{path:"/teamDetails/:teamId",name:"teamDetails",component:Qe},{path:"/projectDetails/:projectId",name:"projectDetails",component:ut}]},{path:"/login",name:"login",component:Ie,meta:{requiredLogin:!0}},{path:"/documentEdit",name:"documentEdit",component:He},{path:"/homePage",name:"homePage",component:nt}],pt=new m.Z({routes:dt});pt.beforeEach(((e,t,a)=>{"/login"===e.path||"/homePage"===e.path||w.state.isLogin?a():a({path:"/login"})}));const ft=m.Z.prototype.push;m.Z.prototype.push=function(e){return ft.call(this,e).catch((e=>e))};var ht=pt,gt=a(4720),vt=a.n(gt);s["default"].config.productionTip=!1,s["default"].use(vt()),new s["default"]({router:ht,store:w,render:function(e){return e(c)}}).$mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,n){if(!s){var o=1/0;for(m=0;m<e.length;m++){s=e[m][0],i=e[m][1],n=e[m][2];for(var r=!0,l=0;l<s.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(m--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[s,i,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,n,o=s[0],r=s[1],l=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var m=l(a)}for(t&&t(s);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(m)},s=self["webpackChunkshare_doc"]=self["webpackChunkshare_doc"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7062)}));s=a.O(s)})();
//# sourceMappingURL=app.f489c053.js.map